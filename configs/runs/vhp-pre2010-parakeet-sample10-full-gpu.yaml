# Configuration for NVIDIA Parakeet-TDT-0.6B-v3 (fastest multilingual ASR)
# Sample 10 files, full audio without manual Python chunking
# Model: https://huggingface.co/nvidia/parakeet-tdt-0.6b-v3
# Performance: RTFx 3332.74 (4.4x faster than Canary-1B), 6.32% WER (English)
# Expected runtime: ~3-5 minutes for 10 samples on T4 GPU

experiment_id: "vhp-pre2010-parakeet-sample10-full-gpu"

# Model configuration
model:
  name: "parakeet-tdt-0.6b-v3"
  dir: "nvidia/parakeet-tdt-0.6b-v3"  # HuggingFace model ID
  device: "cuda"  # GPU required for fast processing
  enable_timestamps: false  # Set true for word/segment/char timestamps

  # Long audio support - NOTE: "bulletproof" config (local attn + subsampling) DOES NOT WORK on T4!
  # NVIDIA's 13hr claim is for A100 80GB, not T4 14.56GB
  # Real-world T4 limits: ~30 min with local attention, OOM beyond that
  # For production: need manual Python chunking for files >30 min (like Canary-Qwen)
  use_local_attention: true  # Solves attention layer memory (O(n²) → O(n))
  att_context_size: [256, 256]  # [left, right] context in frames. Smaller context = longer max audio
  enable_subsampling_chunking: true  # Solves conv layer memory (helps but NOT sufficient on T4)
  subsampling_chunking_factor: 1  # 1=auto-select, -1=disabled

# Input configuration
input:
  source: "azure_blob"
  parquet_path: "data/raw/loc/veterans_history_project_resources_pre2010.parquet"
  blob_prefix: "loc_vhp"
  sample_size: 10  # Sample 10 files for testing
  duration_sec: null  # Process full audio
  sample_rate: 16000  # Parakeet expects 16kHz

# Output configuration
output:
  dir: "outputs/vhp-pre2010-parakeet-sample10-full-gpu"
  save_per_file: true  # Save individual hypothesis files

# Evaluation configuration
evaluation:
  use_whisper_normalizer: true  # Use Whisper text normalizer for WER calculation

# Wandb configuration
wandb:
  project: amia-stt
  group: open-source-models
  tags: ["parakeet-tdt-0.6b-v3", "gpu", "sample10", "vhp-pre2010", "full-audio", "fastest-asr", "600M-params"]
